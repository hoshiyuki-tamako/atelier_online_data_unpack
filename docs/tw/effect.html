<!DOCTYPE html>
<html>

<head>
    <title>效果</title>
    <link rel="stylesheet" href="../css/effect.css">
    <link rel="stylesheet" href="../css/main.css">
    <script src="https://cdn.jsdelivr.net/npm/linq@3.2.3/linq.min.js" integrity="sha256-wNfOgqZN3b4Ddw/AMdNgAqUulgfVw9e96maWCY30eBU=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>

    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="//unpkg.com/element-ui/lib/umd/locale/en.js"></script>
</head>

<body>
  <div id="app">
    <div v-loading="pageLoading">
      <span>全部顯示</span>
      <el-switch @change="onShowAllChange" v-model="showAll"></el-switch>
    </div>
    <el-table id="effect-table" v-loading="tableLoading" :data="getFilteredPaginationSkills()" header-align="center" style="width: 100%" default-expand-all>
      <el-table-column type="expand">
        <template slot-scope="props">
          <div>
            <div v-if="getItemsBySkill(props.row)">
              <h3>物品</h3>
              <a v-for="_item in getItemsBySkill(props.row)" :key="_item.DF" :href="`item.html#DF-${_item.DF}`" target="_blank">
                <img class="icon-small" :src="`../img/icon_s/Texture2D/icon_item_s_${_item.DF}.png`" :alt="_item.NAME">
              </a>
            </div>
            <div v-if="getEnemiesBySkill(props.row)">
              <h3>敵</h3>
              <a v-for="_enemy in getEnemiesBySkill(props.row)" :key="_enemy.DF" :href="`enemy.html#DF-${_enemy.DF}`" target="_blank">
                <img class="icon-small" :src="`../img/enemy/Texture2D/enemy_tex_${_enemy.sParam.MDL}.png`" :alt="_enemy.NAME">
              </a>
            </div>
            <div v-if="getCharactersBySkill(props.row)">
              <h3>人物</h3>
              <a v-for="_chara in getCharactersBySkill(props.row)" :key="_chara.DF" :href="`chara.html#DF-${_chara.DF}`" target="_blank">
                <img class="icon-small" :src="`../img/chara/Texture2D/icon_chara_all_${_chara.DF.toString().padStart(4, '0')}_00.png`" :alt="_chara.NAME">
              </a>
            </div>
          </div>
        </template>
      </el-table-column>
      <el-table-column label="ID" prop="id">
        <template slot="header" slot-scope="scope">
          <el-input v-model="effectTableFilterId" size="mini" placeholder="id"/>
        </template>
      </el-table-column>
      <el-table-column label="名稱" prop="name">
        <template slot="header" slot-scope="scope">
          <el-input v-model="effectTableFilterName" size="mini" placeholder="名前"/>
        </template>
      </el-table-column>
      <el-table-column label="詳細" prop="detail"></el-table-column>
      <el-table-column label="數值" prop="id">
        <template slot-scope="scope">
          {{ scope.row.effectValue }}, {{ scope.row.effectValue2 }}
        </template>
      </el-table-column>
      <el-table-column label="希有度">
        <template slot-scope="scope">
          {{ new Array(scope.row.rarity).fill('⭐').join('') }}
        </template>
      </el-table-column>
    </el-table>
    <el-pagination @current-change="scrollTableTop" :page-size="take" :current-page.sync="page" :total="getFilteredSkills().length" layout="prev, pager, next" background></el-pagination>
  </div>
  <script src="../js/tw_effect.js"></script>
</body>

</html>