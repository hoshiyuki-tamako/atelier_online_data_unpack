(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ToolsItemEnhanceQuality"],{"0a39":function(e,t,i){},"70c1":function(e,t,i){"use strict";i("0a39")},b5cd:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-enhance-quality"},[i("div",{staticClass:"left"},[i("div",{staticClass:"filters"},[i("div",{staticClass:"filter"},[i("span",[e._v(e._s(e.$t("品質")))]),i("el-input-number",{attrs:{size:"small",min:1,max:e.Quality.experiences.length,step:1,"step-strictly":""},model:{value:e.quality,callback:function(t){e.quality=t},expression:"quality"}}),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.add}},[e._v("+")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.setAll}},[e._v(e._s(e.$t("まとめで設定")))]),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.removeAll}})],1)]),i("div",{staticClass:"items"},e._l(e.qualities,(function(t,s){return i("div",{staticClass:"item"},[i("div",[i("el-input-number",{attrs:{size:"mini",min:1,max:e.Quality.experiences.length,step:1,"step-strictly":""},model:{value:t.quality,callback:function(i){e.$set(t,"quality",i)},expression:"quality.quality"}})],1),i("el-tooltip",{attrs:{effect:"light",content:""+e.$t("品質")+e.$t("経験値")+" "+t,placement:"right"}},[i("div",{staticClass:"item__icon",on:{click:function(t){return e.remove(s)}}},[i("img",{staticClass:"icon-small",attrs:{src:"img/icon_item_s/Texture2D/icon_item_s_10020003.png",alt:e.$t("アイテム")}})])])],1)})),0)]),i("div",{staticClass:"right"},[i("div",{staticClass:"orginal-item"},[i("img",{attrs:{src:"img/icon_item_s/Texture2D/icon_item_s_10020003.png",alt:e.$t("アイテム")}}),i("div",{staticClass:"orginal-item__edit"},[i("span",[e._v(e._s(e.$t("品質")))]),i("el-input-number",{attrs:{size:"mini",min:1,max:e.Quality.experiences.length,step:1,"step-strictly":""},model:{value:e.originalQuality,callback:function(t){e.originalQuality=t},expression:"originalQuality"}}),i("span",[e._v(e._s(e.$t("次まで")))]),i("el-input-number",{attrs:{size:"mini",min:0,max:e.maxNextLevel,step:1,"step-strictly":""},model:{value:e.untilNextQuality,callback:function(t){e.untilNextQuality=t},expression:"untilNextQuality"}})],1),i("div",{staticClass:"after-item"},[i("div",[e._v("x"+e._s(e.qualities.length)+e._s(e.$t("個"))+" / "+e._s(e.$t("品質"))+" "+e._s(e.result.quality)+" / "+e._s(e.$t("次まで"))+" "+e._s(e.result.untilNext)+" / "+e._s(e.$t("品質"))+e._s(e.$t("経験値"))+" "+e._s(e.result))])])])])])},n=[],l=(i("ddb0"),i("9ab4")),a=i("2fe1"),r=i("0aea"),c=i("5935"),u=i("2ef0");class o extends Error{}class p{constructor(e=p.experiences[0]){this.experience=0,this.setExperience(e)}get isMaxLevel(){return this.experience>=p.experiences[p.experiences.length-1]}get quality(){return this.isMaxLevel?p.experiences.length:p.experiences.findIndex(e=>e>this.experience)}set quality(e){this.setQuality(e)}get leftover(){return this.experience-p.experiences[this.quality-1]}get untilNext(){if(this.isMaxLevel)return 0;const e=this.quality;return p.experiences[e]-p.experiences[e-1]-this.leftover}setExperience(e=p.experiences[0]){return this.experience=e,this}setQuality(e=1,t=0){if(e<=0||!p.experiences[e-1])throw new o;return this.experience=p.experiences[e-1],t&&!this.isMaxLevel&&(this.experience+=p.experiences[this.quality]-p.experiences[this.quality-1]-t),this}addExperience(e){return this.experience+=e,this}addExperiences(e){return this.experience+=Object(u["sum"])(e),this}valueOf(){return Object(u["clamp"])(this.experience,p.experiences[0],p.experiences[p.experiences.length-1])}toString(){return this.valueOf().toString()}}p.experiences=[1,2,3,4,5,6,7,8,9,10,11,12,14,17,21,26,34,46,61,81,108,142,187,244,315,403,513,647,810,1008,1245,1528,1864,2261,2728,3275,3911,4650,5503,6486,7613,8903,10372,12043,13935,16074,18484,21193,24232,27631,31425,35651,40349,45560,51331,57707,64742,72490,81008,90358,100606,111820,124075,137448,152021,167880,185117,203829,224118,246089,269856,295538,323258,353147,385343,419988,457232,497235,540159,586179,635473,688231,744649,804931,869293,937956,1011154,1089129,1172133,1260427,1354286,1453992,1559840,1672137,1791200,1917359,2050957,2192349,2341902,25e5,2625599,2751565,2877657,3003832,3130048,3256265,3382440,3508352,3634499,3760299,3885891,4011232,4136282,4260998,4385339,4509262,4632727,4755692,4878114,4999953];var x=i("6f7e");class h extends r["a"]{}let m=class extends h{get Quality(){return p}get qualities(){return this.$store.state.itemEnhanceQuality.qualities}set qualities(e){this.$store.commit("itemEnhanceQuality/updateQualities",e)}get maxNextLevel(){return p.experiences[this.originalQuality]-p.experiences[this.originalQuality-1]||0}get result(){return(new p).setQuality(this.originalQuality||1,this.untilNextQuality).addExperiences(this.qualities)}add(){return this.qualities.push((new p).setQuality(this.quality)),this.$forceUpdate()}setAll(){for(const e of this.qualities)e.quality=this.quality}remove(e){this.qualities.splice(e,1)}async removeAll(){await this.$confirm(this.$t("すべてをクリアしてもよろしいですか")+"?","",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),this.qualities=[]}beforeMount(){!this.qualities.length||this.qualities[0]instanceof p||(this.qualities=Object(x["plainToClass"])(p,this.qualities))}};m=Object(l["__decorate"])([Object(a["a"])({components:{},computed:{...Object(c["b"])("itemEnhanceQuality",["quality","originalQuality","untilNextQuality"])}})],m);var y=m,d=y,v=(i("70c1"),i("2877")),g=Object(v["a"])(d,s,n,!1,null,"5da647ea",null);t["default"]=g.exports}}]);