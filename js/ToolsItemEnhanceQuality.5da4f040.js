(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ToolsItemEnhanceQuality"],{"21c6":function(e,t,i){},"9b3c":function(e,t,i){"use strict";i("21c6")},b5cd:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"item-enhance-quality"},[i("div",{staticClass:"left"},[i("div",{staticClass:"filters"},[i("div",{staticClass:"filter"},[i("span",[e._v(e._s(e.$t("品質")))]),i("el-input-number",{attrs:{size:"small",min:10,max:e.Quality.experiences.length,step:1,"step-strictly":""},model:{value:e.quality,callback:function(t){e.quality=t},expression:"quality"}}),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.add}},[e._v("+")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.setAll}},[e._v(e._s(e.$t("まとめで設定")))]),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.removeAll}})],1)]),i("div",{staticClass:"items"},e._l(e.qualities,(function(t,s){return i("div",{staticClass:"item"},[i("div",[i("el-input-number",{attrs:{size:"mini",min:10,max:e.Quality.experiences.length,step:1,"step-strictly":""},model:{value:t.quality,callback:function(i){e.$set(t,"quality",i)},expression:"quality.quality"}})],1),i("el-tooltip",{attrs:{effect:"light",content:e.$t("品質経験値")+" "+t,placement:"right"}},[i("div",{staticClass:"item__icon",on:{click:function(t){return e.remove(s)}}},[i("img",{staticClass:"icon-small",attrs:{src:"img/icon_item_s/Texture2D/icon_item_s_10020003.png",alt:e.$t("アイテム")}})])])],1)})),0)]),i("div",{staticClass:"right"},[i("div",{staticClass:"orginal-item"},[i("img",{attrs:{src:"img/icon_item_s/Texture2D/icon_item_s_10020003.png",alt:e.$t("アイテム")}}),i("div",{staticClass:"orginal-item__edit"},[i("span",[e._v(e._s(e.$t("品質")))]),i("el-input-number",{attrs:{size:"mini",min:10,max:e.Quality.experiences.length,step:1,"step-strictly":""},model:{value:e.originalQuality,callback:function(t){e.originalQuality=t},expression:"originalQuality"}}),i("span",[e._v(e._s(e.$t("あと")))]),i("el-input-number",{attrs:{size:"mini",min:0,max:e.maxNextLevel,step:1,"step-strictly":""},model:{value:e.untilNextQuality,callback:function(t){e.untilNextQuality=t},expression:"untilNextQuality"}})],1),e._l([e.result],(function(t){return i("div",{staticClass:"after-item"},[i("table",[i("tr",[i("th",[e._v(e._s(e.$t("目標品質")))]),i("td",[e._v(e._s(t.quality))])]),i("tr",[i("th",[e._v(e._s(e.$t("あと")))]),i("td",[e._v(e._s(t.untilNext))])]),i("tr",[i("th",[e._v(e._s(e.$t("品質経験値")))]),i("td",[e._v(e._s(t))])])]),i("br"),i("p",[i("small",[e._v(e._s(e.$t("※装備品質上げには大成功ありません")))])]),i("br"),i("h4",{staticClass:"big-success__title"},[e._v(e._s(e.$t("大成功")))]),i("table",{staticClass:"big-success__table"},[i("tr",[i("th",[e._v(e._s(e.$t("目標品質")))]),i("td",[e._v(e._s(t.qualityBigSuccess))])]),i("tr",[i("th",[e._v(e._s(e.$t("あと")))]),i("td",[e._v(e._s(t.untilNextBigSuccess))])]),i("tr",[i("th",[e._v(e._s(e.$t("品質経験値")))]),i("td",[e._v(e._s(t.valueOfBigSuccess()))])])]),i("br"),i("p",{staticClass:"total-item"},[i("img",{staticClass:"icon-small",attrs:{src:"img/icon_item_s/Texture2D/icon_item_s_10020003.png",alt:e.$t("アイテム")}}),i("span",[e._v("x"+e._s(e.qualities.length)+" "+e._s(e.$t("個")))])])])}))],2)])])},n=[],a=i("ade3"),r=i("9ab4"),l=i("2fe1"),c=i("5935"),u=i("6f7e"),p=i("6b98"),o=i("da70");class x extends p["a"]{constructor(...e){super(...e),Object(a["a"])(this,"quality",void 0),Object(a["a"])(this,"originalQuality",void 0),Object(a["a"])(this,"untilNextQuality",void 0)}}let h=class extends x{get Quality(){return o["a"]}get qualities(){return this.$store.state.itemEnhanceQuality.qualities}set qualities(e){this.$store.commit("itemEnhanceQuality/updateQualities",e)}get maxNextLevel(){return o["a"].experiences[this.originalQuality]-o["a"].experiences[this.originalQuality-1]||0}get result(){return(new o["a"]).setQuality(this.originalQuality||1,this.untilNextQuality).addExperiences(this.qualities)}add(){return this.qualities.push((new o["a"]).setQuality(this.quality)),this.$forceUpdate()}setAll(){for(const e of this.qualities)e.quality=this.quality}remove(e){this.qualities.splice(e,1)}async removeAll(){await this.$confirm(this.$t("すべてをクリアしてもよろしいですか")+"?","",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}),this.qualities=[]}beforeMount(){!this.qualities.length||this.qualities[0]instanceof o["a"]||(this.qualities=Object(u["plainToClass"])(o["a"],this.qualities))}};h=Object(r["b"])([Object(l["b"])({components:{},computed:{...Object(c["b"])("itemEnhanceQuality",["quality","originalQuality","untilNextQuality"])}})],h);var g=h,m=g,v=(i("9b3c"),i("2877")),_=Object(v["a"])(m,s,n,!1,null,"82353d7e",null);t["default"]=_.exports},da70:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("ade3"),n=i("acb1"),a=i("2ef0");class r extends Error{}const l=new n["a"];l.G=6.5,l.M=25e5,l.R=100,l.B=10;class c{static get experiences(){return[...Array(100).keys()].map(e=>e+1).map(e=>this.formula.getValue(e)).concat([2625599,2751565,2877657,3003832,3130048,3256265,3382440,3508352,3634499,3760299,3885891,4011232,4136282,4260998,4385339,4509262,4632727,4755692,4878114,4999953])}get experience(){return this.originalExperience+this.addOnExperiences}get bigSuccessExperience(){return this.originalExperience+Math.trunc(1.5*this.addOnExperiences)}get isOriginalMaxLevel(){return this.originalExperience>=c.experiences[c.experiences.length-1]}get isMaxLevel(){return this.experience>=c.experiences[c.experiences.length-1]}get isBigSuccessMaxLevel(){return this.bigSuccessExperience>=c.experiences[c.experiences.length-1]}get originalQuality(){return this.isOriginalMaxLevel?c.experiences.length:c.experiences.findIndex(e=>e>this.originalExperience)}get quality(){return this.isMaxLevel?c.experiences.length:c.experiences.findIndex(e=>e>this.experience)}get qualityBigSuccess(){return this.isMaxLevel||this.isBigSuccessMaxLevel?c.experiences.length:c.experiences.findIndex(e=>e>this.bigSuccessExperience)}set quality(e){this.setQuality(e)}get leftover(){return this.experience-c.experiences[this.quality-1]}get leftoverBigSuccess(){return this.bigSuccessExperience-c.experiences[this.qualityBigSuccess-1]}get untilNext(){if(this.isMaxLevel)return 0;const{quality:e}=this;return c.experiences[e]-c.experiences[e-1]-this.leftover}get untilNextBigSuccess(){if(this.isBigSuccessMaxLevel)return 0;const{qualityBigSuccess:e}=this;return c.experiences[e]-c.experiences[e-1]-this.leftoverBigSuccess}constructor(e=c.experiences[0]){Object(s["a"])(this,"originalExperience",0),Object(s["a"])(this,"addOnExperiences",0),this.setExperience(e)}setExperience(e=c.experiences[0]){return this.originalExperience=e,this}setQuality(e=1,t=0){if(e<=0||!c.experiences[e-1])throw new r;return this.originalExperience=c.experiences[e-1],t&&!this.isMaxLevel&&(this.originalExperience+=c.experiences[this.quality]-c.experiences[this.quality-1]-t),this}addExperiences(e){return this.addOnExperiences+=Object(a["sum"])(e),this}valueOf(){return Object(a["clamp"])(this.experience,c.experiences[0],c.experiences[c.experiences.length-1])}valueOfBigSuccess(){return Object(a["clamp"])(this.bigSuccessExperience,c.experiences[0],c.experiences[c.experiences.length-1])}toString(){return this.valueOf().toString()}}Object(s["a"])(c,"formula",l),Object(s["a"])(c,"qualityStars",{10:"⭐".repeat(1),30:"⭐".repeat(2),60:"⭐".repeat(3),80:"⭐".repeat(4),90:"⭐".repeat(5),100:"🌟".repeat(5)})}}]);