(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OthersAdventBattle"],{"0977":function(e,t,s){"use strict";s("0f64")},"0f64":function(e,t,s){},e947:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"filters"},[s("div",{staticClass:"filter"},[s("el-button",{attrs:{type:"danger",icon:"el-icon-refresh-left",circle:""},on:{click:e.onClickResetScores}})],1)]),s("div",{staticClass:"content"},[s("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.filteredRankList,(function(t){return s("el-tab-pane",{key:t.ID,attrs:{label:t.ID.toString(),name:t.ID.toString()}},[s("div",{staticClass:"advent-battles"},e._l(t.EnemyList,(function(a,c){return s("div",{staticClass:"item-container"},[e._l([e.dataManager.enemyById[a.DF]],(function(t){return s("div",{staticClass:"item-container-left"},[s("h3",{staticClass:"item-name"},[s("router-link",{attrs:{to:{name:"EnemiesEnemy",query:{df:t.DF}},target:"_blank"}},[e._v(e._s(t.strName))])],1),s("img",{staticClass:"icon-full",attrs:{src:t.icon,alt:t.strName}})])})),s("div",{staticClass:"item-container-right"},[s("table",[s("tr",[s("th",[e._v(e._s(e.$t("課題")))]),s("th",[e._v(e._s(e.$t("ポイント")))]),s("th",[e._v(e._s(e.$t("ダメージ")))]),s("th",[e._v(e._s(e.$t("回数")))])]),e._l(a.ScoreList,(function(a,r){return s("tr",[s("td",{staticClass:"advent-battle-name"},[e._v(e._s(a.name))]),s("td",[e._v(e._s(a.score))]),s("td",[a.isDiapNum?e._e():s("el-input-number",{attrs:{size:"small",min:1,step:1,"step-strictly":""},model:{value:e.scores[t.ID][c][r].damage,callback:function(s){e.$set(e.scores[t.ID][c][r],"damage",s)},expression:"scores[adventBattle.ID][enemyListIndex][i].damage"}})],1),s("td",[s("el-input-number",{attrs:{size:"small",min:0,max:e.scoreMax(a.eKind),step:1,"step-strictly":""},model:{value:e.scores[t.ID][c][r].times,callback:function(s){e.$set(e.scores[t.ID][c][r],"times",s)},expression:"scores[adventBattle.ID][enemyListIndex][i].times"}})],1)])})),s("tr",[s("td"),s("td"),s("td"),s("td",[e._v(e._s(e.score(t.ID,c)))])])],2)])],2)})),0)])})),1)],1)])},c=[],r=s("ade3"),n=(s("13d5"),s("9ab4")),i=s("2fe1"),o=s("0063"),l=s.n(o),d=s("2ef0"),u=s("5935"),f=s("3c4e"),m=s.n(f),_=s("6b98"),b=s("f015"),I=s("46ef");class v extends _["a"]{constructor(...e){super(...e),Object(r["a"])(this,"scores",void 0)}}let L=class extends v{constructor(...e){super(...e),Object(r["a"])(this,"activeTab","")}get defaultScores(){return l.a.from(this.dataManager.adventBattle.RankingList).toObject(e=>e.ID,e=>l.a.from(e.EnemyList).select((e,t)=>({enemyList:e,i:t})).toObject(({i:e})=>e,({enemyList:e})=>Array.from({length:e.ScoreList.length},()=>new I["a"])))}get filteredRankList(){return this.dataManager.adventBattle.RankingList}scoreMax(e){switch(e){case b["f"].eBOSS_WIN:case b["f"].eUSE_CHAR:case b["f"].eSKILL_FINISH:case b["f"].eITEM_FINISH:case b["f"].eALL_CHAR_SURVIVAL:case b["f"].eANNIHILATION:case b["f"].eUNDER_MOVE:return 1;case b["f"].eSLIP_FROZEN:case b["f"].eSLIP_BURN:case b["f"].eSLIP_POISON:case b["f"].eOVER_MOVE:case b["f"].eCHAR_DEAD:case b["f"].eSKILL_CHAIN:case b["f"].eUSE_ITEM:case b["f"].eTOTAL_DAMAGE:case b["f"].eBIG_DAMAGE:case b["f"].eWEAK_ATACK:case b["f"].eCRITICAL_ATACK:default:return Number.MAX_VALUE}}score(e,t){const s=this.scores[e][t],a=this.dataManager.adventBattleById[e].EnemyList[t].ScoreList,c=a.reduce((e,{score:t,isDiapNum:a},c)=>a&&t>=1?e+t*s[c].times:e,0),r=a.reduce((e,{score:t,isDiapNum:a},c)=>!a&&t>0?e+t*s[c].damage*s[c].times:e,c),n=a.reduce((e,{score:t,isDiapNum:a},c)=>!a||!s[c].times||0!==t&&Number.isInteger(t)?e:e*(t/s[c].times),r),i=a.reduce((e,{score:t,isDiapNum:a},c)=>a&&t<0?e+t*s[c].times:e,n);return Math.trunc(Object(d["clamp"])(i,0,Number.MAX_VALUE))}onClickResetScores(){for(const[e,t]of Object.entries(this.scores))for(const[s,a]of Object.entries(t))this.scores[e][s]=Array.from({length:a.length},()=>new I["a"])}beforeMount(){this.scores=m()(this.defaultScores,this.scores,{arrayMerge(e,t){const s=e.slice();for(const[a,c]of t.entries())s[a]=c;return s}})}};L=Object(n["b"])([Object(i["b"])({components:{},computed:{...Object(u["b"])("adventBattleFilter",["scores"])}})],L);var p=L,h=p,A=(s("0977"),s("2877")),g=Object(A["a"])(h,a,c,!1,null,"0a7914ec",null);t["default"]=g.exports}}]);