(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["OthersAdventBattle"],{abf0:function(e,t,s){},cb7b:function(e,t,s){"use strict";s("abf0")},e947:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"filters"},[s("div",{staticClass:"filter"},[s("el-select",{attrs:{placeholder:"ID",clearable:"",filterable:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}},e._l(e.idsFilter,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),s("div",{staticClass:"filter"},[s("el-button",{attrs:{type:"danger",icon:"el-icon-refresh-left",circle:""},on:{click:e.onClickResetScores}})],1)]),s("div",{staticClass:"content"},e._l(e.filteredRankList,(function(t){return s("div",[s("el-divider",[e._v(e._s(t.ID))]),s("div",{staticClass:"advent-battles"},e._l(t.EnemyList,(function(a,i){return s("div",{staticClass:"item-container"},[e._l([e.dataManager.enemyById[a.DF]],(function(t){return s("div",{staticClass:"item-container-left"},[s("h3",{staticClass:"item-name"},[e._v(e._s(t.strName))]),s("router-link",{attrs:{to:{name:"EnemiesEnemy",query:{df:t.DF}}}},[s("img",{staticClass:"icon-full",attrs:{src:t.icon,alt:t.strName}})])],1)})),s("div",{staticClass:"item-container-right"},[s("table",[s("tr",[s("th",[e._v(e._s(e.$t("課題")))]),s("th",[e._v(e._s(e.$t("ポイント")))]),s("th",[e._v(e._s(e.$t("ダメージ")))]),s("th",[e._v(e._s(e.$t("回数")))])]),e._l(a.ScoreList,(function(a,r){return s("tr",[s("td",{staticClass:"advent-battle-name"},[e._v(e._s(a.name))]),s("td",[e._v(e._s(a.score))]),s("td",[a.isDiapNum?e._e():s("el-input-number",{attrs:{size:"small",min:1,step:1,"step-strictly":""},model:{value:e.scores[t.ID][i][r].damage,callback:function(s){e.$set(e.scores[t.ID][i][r],"damage",s)},expression:"scores[adventBattle.ID][enemyListIndex][i].damage"}})],1),s("td",[s("el-input-number",{attrs:{size:"small",min:0,max:e.scoreMax(a.eKind),step:1,"step-strictly":""},model:{value:e.scores[t.ID][i][r].times,callback:function(s){e.$set(e.scores[t.ID][i][r],"times",s)},expression:"scores[adventBattle.ID][enemyListIndex][i].times"}})],1)])})),s("tr",[s("td"),s("td"),s("td"),s("td",[e._v(e._s(e.score(t.ID,i)))])])],2)])],2)})),0)],1)})),0)])},i=[],r=s("ade3"),c=(s("13d5"),s("9ab4")),n=s("2fe1"),l=s("6b98"),o=s("0063"),d=s.n(o),u=s("2ef0"),f=s("f015"),m=s("5935"),_=s("46ef"),b=s("3c4e"),v=s.n(b);class I extends l["a"]{constructor(...e){super(...e),Object(r["a"])(this,"id",void 0),Object(r["a"])(this,"scores",void 0)}}let h=class extends I{get defaultScores(){return d.a.from(this.dataManager.adventBattle.RankingList).toObject(e=>e.ID,e=>d.a.from(e.EnemyList).select((e,t)=>({enemyList:e,i:t})).toObject(({i:e})=>e,({enemyList:e})=>Array.from({length:e.ScoreList.length},()=>new _["a"])))}get idsFilter(){return Object.keys(this.dataManager.adventBattleById).map(Number)}get filteredRankList(){return this.dataManager.adventBattle.RankingList.filter(e=>[null,"",-1].includes(this.id)||e.ID===this.id)}scoreMax(e){switch(e){case f["f"].eBOSS_WIN:case f["f"].eUSE_CHAR:case f["f"].eSKILL_FINISH:case f["f"].eITEM_FINISH:case f["f"].eALL_CHAR_SURVIVAL:case f["f"].eANNIHILATION:case f["f"].eUNDER_MOVE:return 1;case f["f"].eSLIP_FROZEN:case f["f"].eSLIP_BURN:case f["f"].eSLIP_POISON:case f["f"].eOVER_MOVE:case f["f"].eCHAR_DEAD:case f["f"].eSKILL_CHAIN:case f["f"].eUSE_ITEM:case f["f"].eTOTAL_DAMAGE:case f["f"].eBIG_DAMAGE:case f["f"].eWEAK_ATACK:case f["f"].eCRITICAL_ATACK:default:return Number.MAX_VALUE}}score(e,t){const s=this.scores[e][t],a=this.dataManager.adventBattleById[e].EnemyList[t].ScoreList,i=a.reduce((e,{score:t,isDiapNum:a},i)=>a&&t>=1?e+t*s[i].times:e,0),r=a.reduce((e,{score:t,isDiapNum:a},i)=>!a&&t>0?e+t*s[i].damage*s[i].times:e,i),c=a.reduce((e,{score:t,isDiapNum:a},i)=>!a||!s[i].times||0!==t&&Number.isInteger(t)?e:e*(t/s[i].times),r),n=a.reduce((e,{score:t,isDiapNum:a},i)=>a&&t<0?e+t*s[i].times:e,c);return Math.trunc(Object(u["clamp"])(n,0,Number.MAX_VALUE))}onClickResetScores(){for(const[e,t]of Object.entries(this.scores))for(const[s,a]of Object.entries(t))this.scores[e][s]=Array.from({length:a.length},()=>new _["a"])}beforeMount(){this.scores=v()(this.defaultScores,this.scores,{arrayMerge(e,t){const s=e.slice();for(const[a,i]of t.entries())s[a]=i;return s}})}};h=Object(c["b"])([Object(n["b"])({components:{},computed:{...Object(m["b"])("adventBattleFilter",["id","scores"])}})],h);var L=h,p=L,A=(s("cb7b"),s("2877")),g=Object(A["a"])(p,a,i,!1,null,"a9503ab2",null);t["default"]=g.exports}}]);